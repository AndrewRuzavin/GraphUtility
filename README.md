# GraphUtility
## Приложение
Утилита принимает один параметр - путь к файлу исходных данных.  
Утилита [GraphUtility](https://drive.google.com/file/d/1TKSXK10VCYmoknBN8_tBlsqauFD6ceAb/view?usp=sharing). Необходимо в настройках задать параметры, как для запускаемого файла.  
Инсталлер [libgvc6](https://drive.google.com/file/d/1E42CcdWKATIQAesbWh3oxG7blKKQHxVq/view?usp=sharing). Необходима для запуска утилиты.

## О приложении
Написано на C++, под Linux Ubuntu 18.04, с использованием библиотеки [graphviz](https://www.graphviz.org/).  
Утилита строит взвешенный ориентированный граф с раскрашенными узлами.  
Для построения графов используется схема `graphviz` `circo`, т.к. только она даёт приемлемые результаты (в примерах показан лучший результат, достигнутый с другой схемой, но всё равно уступающий `circo`), однако рассчёты с ней высчитываются значительно дольше. Так, схема из 1800+ элементов рассчитывалась `graphviz` на протяжении нескольких часов и не была завершена.  

### Фильтрация графа
Имеется возможность задания фильтрации графа по диапазону значений разных параметров:
1. Диапазон идентификаторов вершин. Допустимые значения `от 0 до количества вершин в исходном графе`;  
2. Диапазон "цветов" вершин. "Цвета" представлены в виде их идентификаторов. Всего доступно 256 цветов, соответственно допустимые значения `от 0 до 255`. Убрать определённый цвет (например красный) нельзя, т.к. они генерируются на этапе конвертации исходных данных в формат, приемлемый утилитой генерации графов. Убрать можно только узлы с идентификатором "цвета";  
3. Диапазон весов рёбер. Допустимые значения зависят от используемой архитектуры. В общем случае диапазон `от -1.7E+308 до 1.7E+308`.  

### Требования к входному файлу
Входной файл должен удовлетворять следующим требованиям (после каждого требования следует установить переход на следующую строку):
1. В начале всегда идёт запись "=====". Она расценивается как начало заголовка файла и перед ней ничего не должно стоять;  
2. Запись "V = ", с указанием количества вершин, и "E = ", с указанием количества рёбер. Указанное количество должно соответствовать реальному количеству вершин и рёбер;  
3. Информация по вершинам. Задаётся в формате ", {vertex_id, vertex_color}", где `vertex_id` - идентификатор узла, `vertex_color` - идентификатор его цвета (может совпадать с идентификаторами "цвета" других узлов. Цвет высчитывается на этапе конвертации). Обратите внимание на запятую в начале записи, она необходима и ставится перед каждой вершиной;  
4. Информация по рёбрам. Задаётся в формате ", {vertex_from_id, vertex_to_id, edge_weight}", где `vertex_from_id` - идентификатор исходного узла, `vertex_to_id` - идентификатор узла назначения, `edge_weight` - вес ребра. Обратите внимание на запятую в начале записи, она необходима и ставится перед каждым ребром;  
Все записи после ребёр не учитываются.  
В случае любого несоответствия, формат файла будет некорректным и выполнение утилиты прервётся.  
Примеры исходных файлов представлены [тут](https://github.com/AndrewRuzavin/GraphUtility/tree/master/introduction).  

### Толщина рёбер
Толщина рёбер зависит от их весов. Коэффициент толщины ребра имеет показатель нижней границы веса, начиная с которой ребро толщина ребра будет помножена на этот коэффициент. Если вес ребра (рёбра отсортированы по весу) превышает нижнюю границу в 2 раза и более, её вес становится нижней границей для нового коэффициента.  

### Цвета узлов
Цвет узлов генерируется на этапе конвертации исходных файлов случайным образом и запоминается для дальнейшего использования с узлами, обладающими тем же идентификатором цвета. От конвертации к конвертации цвет узлов может меняться. Возможны получение узлов, чей оттенко цвет близок к цвету узла с другим идентификатором цвета, но цвета будут различными.  

### Отображение
Для просмотра получившегося графа введите `show` в меню утилиты. Команда откроет граф в формате `gvc` в новой вкладке Вашего браузера по умолчанию.  
Результаты вычислений хранятся в директории `resultFiles`, созданной в каталоге расположения утилиты. Она содержит два файла:
1. "source_data_name.scheme_name", где source_data_name - имя файла исходных данных, из которых был получен файл, scheme_name - имя используемой для построения графа схемы. Содержит данные исходного файла, приведённые к формату, из которого можно сгенерировать граф;  
2. "source_data_name.gvc", представляющий из себя отображение графа.  

## Примеры работы
![help](https://user-images.githubusercontent.com/32496224/67199815-dad8c380-f40a-11e9-93eb-b77830286751.png)  
Отображение доступных команд.  


![image](https://user-images.githubusercontent.com/32496224/67199858-f04ded80-f40a-11e9-8957-4c364d865d0e.png)  
Отображение простого графа с предварительным выводом его настроек.  


![image](https://user-images.githubusercontent.com/32496224/67199868-f512a180-f40a-11e9-9799-333da27156f9.png)  
Отображение прошлого графа с установленным диапазоном допустимых значений идентификаторов "1-6".  


![image](https://user-images.githubusercontent.com/32496224/67199909-065bae00-f40b-11e9-8622-3defe7bd1393.png)  
Отображение исходных данных `1.txt` с установленным диапазоном допустимых значений идентификаторов "0-100".  


![image](https://user-images.githubusercontent.com/32496224/67274050-5d738880-f4c8-11e9-9007-9cdb69d12226.png)  
Лучшее из полученных отображений большого графа, с использованием схемы, отличной от `circo`. Испльзуется схема `sfdp`. Отображение исходных данных `1.txt` с установленным диапазоном допустимых значений идентификаторов "0-500"  
